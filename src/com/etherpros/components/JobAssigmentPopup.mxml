<?xml version="1.0" encoding="utf-8"?>
<s:TitleWindow xmlns:fx="http://ns.adobe.com/mxml/2009" 
			   xmlns:s="library://ns.adobe.com/flex/spark" 
			   xmlns:mx="library://ns.adobe.com/flex/mx" width="400" height="300"
			   xmlns:ns="http://mate.asfusion.com/"
			   title="Job Assignment"
			    >
	
	<fx:Script>
		<![CDATA[
			import com.asfusion.mate.events.Dispatcher;
			import com.etherpros.business.ProjectDAO;
			import com.etherpros.events.ProjectEvent;
			
			import mx.collections.ArrayCollection;
			[Bindable]
			private var _projects:ArrayCollection;
			
			private var mateDispatcher:Dispatcher;
			
			protected function jobAssignment(event:MouseEvent):void
			{
				// TODO Auto-generated method stub
				
			}
			
			public function init(_mateDispatcher:Dispatcher):void{
				this.mateDispatcher = _mateDispatcher;
				if ( _projects == null || _projects.length <= 0 ){
					var projectEvent:ProjectEvent = new ProjectEvent(ProjectEvent.FIND_ALL);
					this.mateDispatcher.dispatchEvent(projectEvent);
				}
			}

			
			public function get projects():ArrayCollection
			{
				return _projects;
			}

			public function set projects(value:ArrayCollection):void
			{
				_projects = value;
			}

		]]>
	</fx:Script>
	
	<fx:Declarations>		
	</fx:Declarations>	
	<s:Form >
		<s:FormHeading label="Assignment of jobs to a contractor"/>
		<s:FormItem label="Contractor:">
			<mx:TextInput id="txtContractorName" editable="false"/>
		</s:FormItem>
		<s:FormItem label="Project:">
			<s:ComboBox id="cbxProjectList"
						dataProvider="{ _projects }"
						prompt="--Select--"
						>
				<s:itemRenderer>
					<fx:Component>
						<s:ItemRenderer>
							<s:Label fontFamily="Frutiger" color="#555555" fontSize="10" text="{data.ProjName}" verticalCenter="0" horizontalCenter="0" />	
						</s:ItemRenderer>					
					</fx:Component>
				</s:itemRenderer>
				
			</s:ComboBox>
		</s:FormItem>
		<mx:ControlBar>
			<s:Button id="btnAssign" label="Assign" click="jobAssignment(event)"/>
			<s:Button id="btnCancel" label="Cancel"/>
		</mx:ControlBar>
	</s:Form>
</s:TitleWindow>
